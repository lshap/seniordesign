<html>
	<head>
		<style>canvas { width: 100%; height: 100% }</style> 
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script src="resources/jquery-1.11.0.min.js"></script>
		<script src="resources/OrbitControls.js"></script>
		<script type = "text/javascript">
			var scene;
			var controls;
			var mesh;
			var camera;
			var renderer;
		

			function init()  {
				scene = new THREE.Scene();
				camera = new THREE.PerspectiveCamera( 75, 
									window.innerWidth / window.innerHeight,
									0.1,
									1000 );
				controls = new THREE.OrbitControls(camera);
				renderer = new THREE.WebGLRenderer();
				renderer.setClearColor(0xffffff, 1);
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );
				
				addGeometry();
			
				camera.position.set(0, 50, 150);
				animate();
			}
	
			function addGeometry()  {
				var geometry = new THREE.BufferGeometry();	
				var cubes = 1000;
				var material = new THREE.MeshBasicMaterial({color: 0xff0000});
				geometry.addAttribute('position', Float32Array, cubes, 24);	
				
				var positions = geometry.attributes.position.array;
				var r = 800;
				for (var i = 0; i < cubes; i++) {
					var x = Math.random() * r - r / 2;
					var y = Math.random() * r - r / 2;
					var z = Math.random() * r - r / 2;

					// bottom square
					positions[i * 24] = x;
					positions[i * 24 + 1] = y;
					positions[i * 24 + 2] = z;

					positions[i * 24 + 3] = x + 1;
					positions[i * 24 + 4] = y;
					positions[i * 24 + 5] = z;

					positions[i * 24 + 6] = x + 1;
					positions[i * 24 + 7] = y;
					positions[i * 24 + 8] = z - 1;

					positions[i * 24 + 9] = x;
					positions[i * 24 + 10] = y;
					positions[i * 24 + 11] = z - 1;

					// top square
					positions[i * 24 + 12] = x;
					positions[i * 24 + 13] = y + 1;
					positions[i * 24 + 14] = z;

					positions[i * 24 + 15] = x + 1;
					positions[i * 24 + 16] = y + 1;
					positions[i * 24 + 17] = z;

					positions[i * 24 + 18] = x + 1;
					positions[i * 24 + 19] = y + 1;
					positions[i * 24 + 20] = z - 1;

					positions[i * 24 + 21] = x;
					positions[i * 24 + 22] = y + 1;
					positions[i * 24 + 23] = z - 1;

				}
			
				mesh = new THREE.Mesh(geometry, material);
				scene.add(mesh);


			}

			function animate()  {
				requestAnimationFrame(animate);
				render();
			}

			function render()  {
				renderer.render(scene, camera);
			}

			$(document).ready(function () {
				init();
			});
	
		</script>
	</head>
	<body>
	</body>
</html>
