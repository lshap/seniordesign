<html>
	<head>
		<title>Three.js app</title>
		<style>canvas { width: 100%; height: 100% }</style>
	</head>
	<body>
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script src="resources/jquery-1.11.0.min.js"></script>
		<script src="resources/OrbitControls.js"></script>
		<script>
			var scene;
			var camera;
			var renderer;
			var oldMousex;
			var oldMousey;
			var controls;

			var width = window.innerWidth;
			var height = window.innerHeight;	
			var angle1 = -Math.PI/2;
			var angle2 = 0;
			var r = 5;

			$(document).ready(function() {	
			init();
	
			function init() {
				scene = new THREE.Scene();
				camera = new THREE.PerspectiveCamera( 75, 
									window.innerWidth / window.innerHeight,
									0.1,
									1000 );

				controls = new THREE.OrbitControls(camera);
				controls.addEventListener('change', render);

				renderer = new THREE.WebGLRenderer();
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

				var geometry = new THREE.CubeGeometry(1,1,1);
				var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
				var cube = new THREE.Mesh( geometry, material );
				scene.add( cube );

				camera.position.z = 5;
				render();
			}


			function render() {
				requestAnimationFrame(render);
				renderer.render(scene, camera);
				// controls.update();
			}
			


/*			$("canvas").mousedown(function(e){
				var parentOffset = $(this).parent().offset();
				oldMousex = e.pageX;
				oldMousey = e.pageY;
//				console.log("clicked at " + oldMousex + " , " + oldMousey);
				console.log("width = " + width + "height = " + height);
			});

			$("canvas").mouseup(function(e) {
				var deltaX = e.pageX - oldMousex;
				var deltaY = e.pageY - oldMousey;
				console.log("rotating by " + deltaX + " " + deltaY);
				rotateCamera(deltaX, deltaY);	
			});

			function rotateCamera(x, y) {
				var gain = 40;
				angle1 += gain * (x * Math.PI/180)/width;
				angle2 += gain * (-y * Math.PI/180)/height;
				angle2 %= Math.PI/2;

				var t = r * Math.cos(angle2);
				camera.position.y = r * Math.sin(angle2);
				camera.position.x = t * Math.cos(angle1);
				camera.position.z = t * Math.sin(angle1);
				console.log("new position: " + camera.position.x 
						+ " , " + camera.position.y
						+ " , " + camera.position.z);
				render();
			}*/	
		
});
		</script>
	</body>	
</html>
