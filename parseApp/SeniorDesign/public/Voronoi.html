
<html>
	<head>
		<script src="https://rawgithub.com/mrdoob/three.js/master/build/three.js"></script>
		<script src="resources/jquery-1.11.0.min.js"></script>
		<script src="resources/jquery.csv-0.71.min.js"></script>
		<script src="resources/OrbitControls.js"></script>
		<script src="resources/voronoi-core.min.js"></script>

		<script src="resources/spectrum.js"></script>
		<script src="resources/tweenjs-0.5.1.min.js"></script>
		<script src="Voronoi.js"></script>
		<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.17.min.js"></script>	
		
		<script src="bootstrap/js/bootstrap.min.js"></script>
		<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<link href="spectrum.css" rel="stylesheet">
	</head>
	<body>
		<script type="text/javascript">
				
			Parse.initialize("wXAin9oHZpf2dzdV4JY14kYHRQB6O2nw9RhpYFJm", "A9kkHfGasI2IkaVdtK2uYG8RADxkgJ0HMZ69c3QR"); 
			var MY_APP_ID = "wXAin9oHZpf2dzdV4JY14kYHRQB6O2nw9RhpYFJm";
			var MY_REST_API_ID = "luGqhHanKCHJnQwWkKRFGru3XexioAvk6diyqQQZ";
			$('#saveBtn').addClass('disabled');
			var data = [];

			var colorInputs = [];

			var vornoiVis;
			var Visualization = Parse.Object.extend("Visualization");

			colorInputs.push(0x00ff00);
			colorInputs.push(0xffff00);
			colorInputs.push(0x0000ff);

			function initColors() {
				$(".colorinput").spectrum({showInputs:true});
				
				$(".colorinput").change(function(){
					// substring(5) because each id starts with "color"
					var index = parseInt((this.id).substring(5)) - 1;
					var stringval = this.value;	
					var hexstring = "0x" + stringval.substring(1);	
					var hexval = parseInt(hexstring, 16);
					colorInputs[index] = hexval;
				});
			}

			$(document).ready(function(){
				// init color selection
				initColors();

				$("#addColor").click(function (event) {
					var nextColorNum = colorInputs.length + 1;		
					var newColorInput = "<li><input type=\"color\" class=\"colorinput st_dropdown\" id=\"color" + 
							     nextColorNum + "\" value=\"#ff0000\"/></li>";
					$(this).before(newColorInput);
					colorInputs.push(0xff0000);
					initColors();
					event.stopPropagation();
				});

				$("#visualize").click(function () {
					$("#renderDiv").empty();
					var pts = [];

					for (var i = 0; i < 500; i++) {
						var x = Math.random();
						var y = Math.random();
						pts.push({x:x, y:y});
					}


					var v = new VoronoiDiagram(pts, colorInputs);
					v.initScene();
					
					if (data.length > 0){
						//$("#renderDiv").empty();

						//TODO:CREATE VIS WITH DATA
						
						
						if ($("#saveBtn").hasClass("disabled")) {
							$("#saveBtn").removeClass("disabled");
						}

						$("#saveas").val("");
					}
				});

			});
		</script>
		<nav class="navbar navbar-default" role="navigation"> <div class="navbar-header"> <a class="navbar-brand" href="index.html"> 3D Data Visualization</a>			
				<ul class = "nav navbar-nav">
					<li><a href = "ImageExtrude.html"> Image Extrusion </a></li>
					<li><a href = "#" class="active"> Voronoi </a></li>
					<li><a href = "Archive.html"> Archive </a></li>
				</ul>
			</div>
		</nav>
		<div class="container">		

			<div class = "row">
				<div class="page-header">
					<h1>Voronoi Diagram</h1>
				</div> 
			</div>

			<div class = "row">
				<input type="file" name="datafile" accept=".csv" style="visibility:hidden;width:0px;" id="datasrc_in"/>
				<div class="btn-group">
					<div class="input-append">
						<button id="dataBtn" type = "button" class="btn btn-default" onclick = "$('#datasrc_in').click();">
						<span class="glyphicon glyphicon-folder-open"></span>  Choose Data</button>

					<div class="btn-group">
						<button id="pickcolorInputs" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
							Colors <span class="caret"></span></button>
						 <ul id="colordropdown" class="dropdown-menu" role="menu">
						    <li>
							<input type="color" class="colorinput st_dropdown" id="color1" value="#00ff00"/>
							<input type="color" class="colorinput st_dropdown" id="color2" value="#ffff00"/>
							<input type="color" class="colorinput st_dropdown" id="color3" value="#0000ff"/>
						    </li>
						    <!--<button id="delColor2" class="btn btn-default">delete</button>-->
						    <li><a id="addColor" href="#" class="btn btn-default">add color
							</a>
						    </li>
						  </ul>
				        </div>

					</div>
				</div>
				<button id="visualize" type="button" class = "btn btn-primary"> Visualize </button>
				<button id="saveBtn" type="button" class = "btn btn-secondary disabled" data-toggle="modal" data-target ="#save-modal"> 
					Save 
				</button>
			<div class="row" id="renderDiv" style="height:400px;">
			</div>

			</div>
	</body>

</html>
